/*! ki_budget */
function bud_ext_onload(){set_lists_visibility(true,$("#gui").find("div.ext.ki_budget").attr("id"));bud_ext_resize();$("#loader").hide();lists_visible(true);try{bud_ext_reload();}catch(e){alert(e);}}function bud_ext_set_heightTop(){bud_ext_get_dimensions();if(!extensionShrinkMode){$("#budgetArea").css("height",bud_height);}else{$("#budgetArea").css("height","20px");}}function bud_ext_get_dimensions(){(customerShrinkMode)?subtableCount=2:subtableCount=3;subtableWidth=(pageWidth()-10)/subtableCount-7;bud_width=pageWidth()-24;bud_height=pageHeight()-198-headerHeight()-28;}function bud_ext_resize(){bud_ext_set_heightTop();}function bud_ext_plot(plotdata){var target;for(var projectId in plotdata){var background=false;for(var activityId in plotdata[projectId]){if(activityId==0){target="budget_chartdiv_"+projectId;}else{target="budget_chartdiv_"+projectId+"_activity_"+activityId;}if($("#"+target).length==0){continue;}var actualData=[];for(var index in plotdata[projectId][activityId]){if(index=="exceeded"){$("#"+target).parent().children(".budget").css("color","red");}else{if(index=="approved_exceeded"){$("#"+target).parent().children(".approved").css("color","red");}else{if(index=="approved"||index=="budget_total"||index=="billable_total"||index=="approved_total"||index=="total"){}else{if(index=="name"){}else{if(background==false){background=$("#"+target).css("background-color");}actualData.push(new Array(index,plotdata[projectId][activityId][index]));}}}}}try{$.jqplot(target,[actualData],{seriesDefaults:{renderer:$.jqplot.PieRenderer,rendererOptions:{padding:10,showDataLabels:true,dataLabels:"value"}},legend:{show:true,placement:"outsideGrid"},seriesColors:chartColors,grid:{background:background,borderWidth:0,shadow:false}});}catch(err){$("#"+target).remove();}}}}function bud_ext_reload(){$.ajax({dataType:"html",url:bud_ext_path+"processor.php",type:"POST",data:{axAction:"reload",axValue:filterUsers.join(":")+"|"+filterCustomers.join(":")+"|"+filterProjects.join(":"),first_day:new Date($("#pick_in").val()).getTime()/1000,last_day:new Date($("#pick_out").val()).getTime()/1000,id:0},success:function(data){$("#budgetArea").html(data);},error:function(error){alert(error);}});}